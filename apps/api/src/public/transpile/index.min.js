const REGEX_MENTION=/<@!?\w+>/g,REGEX_MENTION_CHANNEL=/<#\w+>/g,BOLD_REGEX=/\*\*(.*?)\*\*/g,ButtonsColors={1:"#5865F2",2:"#4F545C",3:"#43B581",4:"#F04747",5:"#4F545C"},parsedEmphasis=e=>{let s=e.replace(BOLD_REGEX,(e,s)=>`<span class="bold">${s}</span>`);return s},parseMarkdown=e=>{let s=parsedEmphasis(e);return s},parseMessage=e=>{let s=e.replace(REGEX_MENTION,'<span class="mention">@Mention</span>'),a=parseMarkdown(s),l=a.replace(REGEX_MENTION_CHANNEL,'<span class="mention">@Channel</span>');return l},setupComponents=e=>{for(let s of e)for(let a of s.components)if(1===a.type&&a.components.length>0){let l=document.createElement("div");l.classList.add("component","one");let n=document.getElementById(`components-${s.id}`);for(let t of(n.appendChild(l),a.components))if(2===t.type){let o=document.createElement("div");o.classList.add("component","two"),o.style=`--button-color: ${ButtonsColors[t.style]}`,t?.emoji?.name&&o.append(t.emoji.name),t?.label&&o.append(t.label),l.appendChild(o)}}},messageShouldShow=e=>!!(e.content.length>0)||!!(e.embeds.length>0)||!!(e.components.length>0),decimalToHex=e=>{if(!e)return"";let s=e.toString(16);for(;s.length<6;)s="0"+s;return s},loadMessages=e=>{let s=document.getElementById("messages");for(let a of e)s.innerHTML+=`
                <div style="${messageShouldShow(a)?"display: flex":"display: none"}" class="message">
    <div class="left">
        <img src="${a?.authorImage??"https://cdn.discordapp.com/embed/avatars/1.png"}"
            alt="img">
    </div>

    <div class="right">
        <div class="info">
            <span class="name">ccca</span>
            <span style="${a.isBot?"display: block":"display: none"}" class="bot">BOT</span>
            <span class="created-at">${new Date(a.timestamp).toLocaleString()}</span>
        </div>
        <div class="body">
            <pre style="${a?.content?.length>0?"display: block":"display: none"}" class="content">${parseMessage(a.content)}</pre>
            
            <div style="${a?.embeds?.length>0?"display: flex":"display: none"}" class="embeds">
                ${a.embeds.map(e=>{let s=e?.author?.name,a=e?.author?.icon_url,l=e?.footer?.icon_url,n=e?.footer?.text,t=decimalToHex(e.color);return console.log({embedColor:t}),`
                    <div style="--embed-color: #${t}" class="embed">
                    <div style="${s||a?"display: flex":"display: none"}" class="author">
                        <img style="${a?"display: block":"display: none"}" src="${a}"
                            alt="" class="img">
                        <span style="${s?"display: block":"display: none"}" class="name">${s}</span>
                    </div>
                    <pre style="${e?.title?"display: block":"display: none"}" class="title">${e.title}</pre>
                    <pre style="${e?.description?"display: block":"display: none"}" class="description">${e.description}</pre>
                    <div style="${n||l||e?.timestamp?"display: flex":"display: none"}" class="footer">
                        <img style="${l?"display: block":"display: none"}" class="footer-img" src="${l}" alt="">
                        <span style="${n?"display: block":"display: none"}" class="footer-text">${n}</span>
                        <span style="${e?.timestamp?"display: block":"display: none"}" class="footer-time">${e.timestamp}</span>
                    </div>
                </div>`})}

            </div>

            <div style="${a?.components?.length>0?"display: flex":"display: none"}" id="components-${a.id}" class="components">
            </div>
        </div>
    </div>
</div>
                `},setupMetadata=e=>{let s=document.getElementById("metadata");s.innerHTML=`
            <div class="top">
            <img src="${e?.guild?.icon}"
                alt="server-icon">
            <span class="name">${e?.guild?.name}</span>
            </div>
            <div class="bottom">
                <span class="messages-length">messages: <span class="special">${e?.length}</span></span>
                <span class="channel-name">channel: <span class="special">${e?.channel?.name}</span></span>
            </div>
            `},load=(e,s)=>{loadMessages(e),setupComponents(e),setupMetadata(s)};